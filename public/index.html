<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sales Dashboard</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="bg"></div>
    <header class="hero">
      <div>
        <p class="eyebrow">Live</p>
        <h1>Sales Intelligence</h1>
        <p class="sub">Real-time signals from your ERP sales pipeline.</p>
      </div>
      <div class="filters">
        <div class="field">
          <label for="start">Start</label>
          <input type="date" id="start" />
        </div>
        <div class="field">
          <label for="end">End</label>
          <input type="date" id="end" />
        </div>
        <div class="field month-quick">
          <label>Quick months</label>
          <div class="month-buttons">
            <button type="button" class="month-chip" id="monthBtn0"></button>
            <button type="button" class="month-chip" id="monthBtn1"></button>
            <button type="button" class="month-chip" id="monthBtn2"></button>
            <button type="button" class="month-chip" id="monthBtn3"></button>
          </div>
        </div>
        <div class="field">
          <label for="granularity">Granularity</label>
          <select id="granularity">
            <option value="day">Daily</option>
            <option value="week">Weekly</option>
            <option value="month">Monthly</option>
          </select>
        </div>
        <div class="field">
          <label for="itemFilter">Item</label>
          <select id="itemFilter"></select>
        </div>
        <div class="field">
          <label for="warehouseFilter">Warehouse</label>
          <select id="warehouseFilter"></select>
        </div>
        <div class="field">
          <label for="categoryFilter">Category</label>
          <select id="categoryFilter"></select>
        </div>
        <div class="field">
          <label for="customerFilter">Customer</label>
          <select id="customerFilter"></select>
        </div>
        <div class="field">
          <label for="statusFilter">Status</label>
          <select id="statusFilter">
            <option value="1">Submitted</option>
            <option value="0">Draft</option>
          </select>
        </div>
        <button id="refresh">Refresh</button>
      </div>
    </header>

    <main>
      <section class="panel">
        <div class="panel-header">
          <h3>Calendar</h3>
          <p>Click a date to filter</p>
        </div>
        <div class="calendar-controls">
          <div class="field">
            <label for="yearSelect">Year</label>
            <select id="yearSelect"></select>
          </div>
          <div class="field">
            <label for="monthSelect">Month</label>
            <select id="monthSelect"></select>
          </div>
          <button id="clearDateFilter" class="ghost-button" type="button">Clear</button>
        </div>
        <div id="dateList" class="date-list compact"></div>
      </section>

      <div class="tabs">
        <button class="tab active" data-tab="main">Main</button>
        <button class="tab" data-tab="invoices">Invoice Section</button>
      </div>

      <section class="tab-panel active" data-panel="main">

        <section class="cards">
          <div class="card">
            <p class="label">Revenue</p>
            <h2 id="totalRevenue">0</h2>
            <p class="hint">Total sales value</p>
          </div>
          <div class="card">
            <p class="label">Qty Sold</p>
            <h2 id="totalQty">0</h2>
            <p class="hint">Total items shipped</p>
          </div>
          <div class="card">
            <p class="label">Invoices</p>
            <h2 id="totalInvoices">0</h2>
            <p class="hint">Completed invoices</p>
          </div>
          <div class="card">
            <p class="label">Avg Order</p>
            <h2 id="avgOrderValue">0</h2>
            <p class="hint">Average invoice value</p>
          </div>
          <div class="card">
            <p class="label">Estimated Profit</p>
            <h2 id="totalProfit">0</h2>
            <p class="hint">Revenue minus cost</p>
          </div>
          <div class="card">
            <p class="label">Profit Margin</p>
            <h2 id="profitMargin">0%</h2>
            <p class="hint">Profit as % of revenue</p>
          </div>
          <div class="card">
            <p class="label">Avg Order Profit</p>
            <h2 id="avgOrderProfit">0</h2>
            <p class="hint">Estimated profit per invoice</p>
          </div>
        </section>

        <section class="panel">
          <div class="panel-header">
            <h3>Revenue + Quantity + Profit Over Time</h3>
            <p>Updated live from Postgres</p>
          </div>
          <canvas id="salesChart" height="120"></canvas>
        </section>

        <section class="grid">
          <div class="panel">
            <div class="panel-header">
              <h3>Top Items</h3>
              <p>Best-performing products</p>
            </div>
            <div id="topItems"></div>
          </div>
          <div class="panel">
            <div class="panel-header">
              <h3>Top Customers</h3>
              <p>Highest value accounts</p>
            </div>
            <div id="topCustomers"></div>
          </div>
          <div class="panel">
            <div class="panel-header">
              <h3>Top Categories</h3>
              <p>Category performance</p>
            </div>
            <div id="topCategories"></div>
          </div>
          <div class="panel">
            <div class="panel-header">
              <h3>Top Warehouses</h3>
              <p>Warehouse performance</p>
            </div>
            <div id="topWarehouses"></div>
          </div>
        </section>
      </section>

      <section class="tab-panel" data-panel="invoices">
        <section class="panel">
          <div class="panel-header">
            <div>
              <h3>Invoice Section</h3>
              <p>Click to view invoice items</p>
            </div>
            <div class="invoice-search">
              <input id="invoiceSearch" type="text" placeholder="Search invoice or customer..." />
            </div>
          </div>
          <div class="invoice-split">
            <div id="invoiceList"></div>
            <div class="invoice-detail">
              <div class="drawer-header">
                <div class="drawer-meta">
                  <p class="drawer-label">Invoice</p>
                  <h3 id="drawerInvoiceNo">Select an invoice</h3>
                  <p class="drawer-label">Customer</p>
                  <h3 id="drawerTitle">â€”</h3>
                  <p id="drawerSubtitle"></p>
                </div>
              </div>
              <div id="invoiceItems"></div>
            </div>
          </div>
        </section>
      </section>
    </main>

    

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
